
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Bitcoin Rentenplaner</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 2em;
            background: #fff;
            color: #222;
            max-width: 800px;
            margin: auto;
        }
        h1 {
            color: #ff9900;
        }
        label {
            display: block;
            margin-top: 1em;
        }
        input {
            padding: 0.5em;
            margin-top: 0.2em;
            width: 100%;
        }
        button {
            margin-top: 1em;
            padding: 0.7em 1.5em;
            background: #ff9900;
            border: none;
            color: white;
            font-size: 1em;
            cursor: pointer;
        }
        canvas {
            margin-top: 2em;
        }
    </style>
</head>
<body>
    <h1>Bitcoin Rentenplaner</h1>
    <label>Aktuelles Alter:
        <input type="number" id="age" value="35">
    </label>
    <label>Geplanter Rentenbeginn (Alter):
        <input type="number" id="retirementAge" value="60">
    </label>
    <label>Jährliche Ausgaben im Ruhestand (USD):
        <input type="number" id="annualExpenses" value="70000">
    </label>
    <label>Aktueller BTC-Bestand:
        <input type="number" id="btcOwned" value="0.2" step="0.01">
    </label>
    <button onclick="calculate()">Berechnen</button>
    <p id="output"></p>
    <canvas id="btcChart" width="700" height="400"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function powerLawPrice(year) {
            const A = 0.38;
            const b = 3.2;
            const t0 = 2009;
            const deltaT = year - t0;
            if (deltaT <= 0) return 0;
            return A * Math.pow(deltaT, b);
        }

        function calculate() {
            const age = parseInt(document.getElementById("age").value);
            const retirementAge = parseInt(document.getElementById("retirementAge").value);
            const annualExpenses = parseFloat(document.getElementById("annualExpenses").value);
            const btcOwned = parseFloat(document.getElementById("btcOwned").value);

            const currentYear = new Date().getFullYear();
            const yearsUntilRetirement = retirementAge - age;
            const retirementYear = currentYear + yearsUntilRetirement;
            const lifeExpectancy = 85;
            const retirementDuration = lifeExpectancy - retirementAge;
            const inflationRate = 0.033;

            const barwert = annualExpenses * (1 - Math.pow(1 + inflationRate, -retirementDuration)) / inflationRate;
            const btcPrice = powerLawPrice(retirementYear);
            const requiredBTC = btcPrice > 0 ? barwert / btcPrice : 0;
            const additionalBTC = Math.max(0, requiredBTC - btcOwned);
            const dca = additionalBTC > 0 ? (additionalBTC * btcPrice) / (yearsUntilRetirement * 12) : 0;

            document.getElementById("output").innerHTML = `
                <strong>Ergebnisse:</strong><br>
                Rentenjahr: ${retirementYear}<br>
                Erwarteter BTC-Preis: $${btcPrice.toFixed(0)}<br>
                Barwert Kapitalbedarf (inflationsbereinigt): $${barwert.toFixed(0)}<br>
                Benötigte BTC: ${requiredBTC.toFixed(3)}<br>
                Zusätzlicher Bedarf: ${additionalBTC.toFixed(3)} BTC<br>
                Monatliche Sparrate (in USD): $${dca.toFixed(0)}
            `;

            const labels = [];
            const prices = [];
            for (let y = currentYear; y <= retirementYear + 5; y++) {
                labels.push(y);
                prices.push(powerLawPrice(y));
            }

            const ctx = document.getElementById('btcChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'BTC Preis (Power-Law)',
                        data: prices,
                        borderColor: '#ff9900',
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: 'BTC Preis in USD'
                            },
                            type: 'logarithmic'
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Jahr'
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
